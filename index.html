<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bubble Game</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div id="main">
        <div id="panel">

            <div id="nav">
                <div class="nav-elem">
                    <h4>Click :</h4>
                    <div id="target" class="box">1</div>
                </div>
                <div class="nav-elem">
                    <h4>Timer :</h4>
                    <div id="timerVal" class="box">30</div>
                </div>
                <div class="nav-elem">
                    <h4>Score :</h4>
                    <div id="scoreVal" class="box">0</div>
                </div>
            </div>

            <div id="page">

            </div>

            <!-- <button id="start" onclick="target()">Start</button> -->
        </div>
    </div>


    <script>

        // add score
        var score = 0;
        function addScore() {
            score += 10;
            document.querySelector("#scoreVal").textContent = score;
        }

        // get new target
        var newTarget = 0;
        function getNewTarget() {
            newTarget = Math.floor(Math.random() * 10);
            document.querySelector("#target").textContent = newTarget;
        }

        // Make Bubble
        function makeBubble() {
            var balls = "";
            for (var j = 1; j <= 152; j++) {
                var num = Math.floor(Math.random() * 10);
                balls += `<div class="bubble">${num}</div>`;
            }
            document.querySelector("#page").innerHTML = balls;
        }

        // timer
        var time = 30;
        function runTimer() {
            var timer = setInterval(function () {
                if (time > 0) {
                    time--;
                    document.querySelector("#timerVal").textContent = time;
                }
                else {
                    clearInterval(timer);
                    document.querySelector("#page").innerHTML = `<h1>Game Over!</h1><h1>${score}</h1>`;
                }
            }, 1000);
        }


        // get number by click
        var clickedNumber;
        document.querySelector("#page").addEventListener("click", function (dats) {
            clickedNumber = Number(dats.target.textContent);
            if (clickedNumber == newTarget) {
                addScore();
                getNewTarget();
                // time = 30;
                makeBubble();
            }
        });


        makeBubble();
        runTimer();
        getNewTarget();

    </script>
    <script src="script.js"></script>
</body>

</html>